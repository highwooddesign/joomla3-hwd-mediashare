function loadMedia(e){if(document.getElementById("image-slideshow-"+e)){var t=document.getElementById("image-slideshow-"+e).getAttribute("rel");var n=JSON.decode(t);var r=n.position;document.getElementById("media-item").empty().addClass("ajax-loading-slideshow");document.getElementById("slide").getElements(".highlighted").removeClass("highlighted");document.getElementById("image-slideshow-"+e).addClass("highlighted");document.getElementById("current-position").set("html",r);document.getElementById("current-title").set("html",n["title"]);var i=(new Request({url:"index.php?option=com_hwdmediashare&task=get.html&format=raw&id="+n["id"],method:"get",onComplete:function(e){document.getElementById("media-item").removeClass("ajax-loading-slideshow").set("html",e)}})).send();setHeight()}}function setHeight(){var e=document.getElementById("media-slideshow-toggle");if(e){var t=document.body.getSize().y;var n=document.getElementById("media-slideshow-toggle").getSize().y;var r=t-n-30;var i=r+"px";document.getElementById("media-item").setStyle("height",i)}}if(typeof jQuery!="undefined"){jQuery.noConflict()}if(!key){var key=0}window.addEvent("domready",function(){if(document.getElementById("paneMap")){document.getElementById("paneMap").addEvent("click",function(){setTimeout("onLoadmap()",100)})}});window.addEvent("domready",function(){var e=300,t=document.getElement("div.media-slideshow-container");if(t){links=t.getElements("a"),carousel=new Carousel.Extra({activeClass:"selected",autostart:true,container:"slide",scroll:5,circular:true,current:key,previous:links.shift(),next:links.pop(),tabs:links,distance:1,fx:{duration:e}}),removed=0;function n(){var e=this.retrieve("panel");if(this.checked){if(!e){if(carousel.running){carousel.addEvent("complete:once",n.bind(this));return}e=carousel.remove(Math.max(0,this.value-removed));if(e){this.store("panel",e);removed++}this.checked=!!e}}else{if(e){this.eliminate("panel");removed--;carousel.add(e.panel,e.tab.inject(t.getFirst(),"after"),this.value)}}}$$("input.remove").addEvents({click:n,change:n})}var r=document.getElementById("media-slideshow-container");var i=document.getElementById("slideshow-tab");if(r&&i){var s={"true":"Hide","false":"Show"};var o=new Fx.Slide("media-slideshow-container");document.getElementById("slideshow-tab").addEvent("click",function(e){e.stop();o.toggle();setHeight()});o.addEvent("complete",function(){document.getElementById("slideshow-status").set("text",s[o.open])});loadMedia(key);setHeight()}});window.addEvent("domready",function(){$$("a.media-audio-playlist-play").each(function(e){e.addEvent("click",function(e){e.stop();var t=document.getElementById(this.get("id")).get("rel");var n=JSON.decode(t);var r=n.playerId;var i=n.playerContainer;$$("div.mejs-pause").fireEvent("click");$(this.get("id")).addClass("active");var s=hwdms_live_site;var o=(new Request.HTML({url:s,method:"post",evalResponse:true,data:"option=com_hwdmediashare&task=get.html&id="+n.id+"&format=raw&autoplay=1",update:n.playerContainer,onComplete:function(e){},onSuccess:function(e,t,n,r){}})).send()})});$$("a.media-video-playlist-play").each(function(e){e.addEvent("click",function(e){e.stop();var t=document.getElementById(this.get("id")).get("rel");var n=JSON.decode(t);var r=n.playerId;var i=n.playerContainer;$(this.get("id")).addClass("active");var s=hwdms_live_site;var o=(new Request.HTML({url:s,method:"post",evalResponse:true,data:"option=com_hwdmediashare&task=get.html&id="+n.id+"&format=raw&autoplay=1&mediaitem_size="+n.width,update:n.playerContainer,onComplete:function(e){},onSuccess:function(e,t,n,r){}})).send()})})});window.addEvent("domready",function(){if(document.getElementById("media-subscribe")){document.getElementById("media-subscribe").addEvent("click",function(e){e.preventDefault();document.getElementById("media-subscribe").empty().addClass("ajax-loading-button");var t=hwdms_live_site;var n=document.getElementById("media-subscribe-form").get("action");var r=n.parseQueryString();var i=(new Request({url:t,method:"post",data:"option=com_hwdmediashare&task=get.subscribe&id="+r.id+"&format=raw",onComplete:function(e){var t=false;try{var n=JSON.decode(e);if(typeof n.errors==="undefined"||n.errors>0){var t=true}if(t){document.getElementById("media-subscribe").removeClass("ajax-loading-button").addClass("ajax-error").set("value",n.data.error_msg)}else{document.getElementById("media-subscribe").removeClass("ajax-loading-button");document.getElementById("media-subscribe").set("styles",{display:"none"});document.getElementById("media-unsubscribe").set("styles",{display:"inline"})}}catch(t){document.getElementById("media-subscribe").removeClass("ajax-loading-button").addClass("ajax-error").set("value","error")}}})).send()})}if(document.getElementById("media-unsubscribe")){document.getElementById("media-unsubscribe").addEvent("click",function(e){e.preventDefault();document.getElementById("media-unsubscribe").empty().addClass("ajax-loading-button");var t=hwdms_live_site;var n=document.getElementById("media-subscribe-form").get("action");var r=n.parseQueryString();var i=(new Request({url:t,method:"post",data:"option=com_hwdmediashare&task=get.unsubscribe&id="+r.id+"&format=raw",onComplete:function(e){var t=false;try{var n=JSON.decode(e);if(typeof n.errors==="undefined"||n.errors>0){var t=true}if(t){document.getElementById("media-unsubscribe").removeClass("ajax-loading-button").addClass("ajax-error").set("value",n.data.error_msg)}else{document.getElementById("media-unsubscribe").removeClass("ajax-loading-button");document.getElementById("media-unsubscribe").set("styles",{display:"none"});document.getElementById("media-subscribe").set("styles",{display:"inline"})}}catch(t){document.getElementById("media-unsubscribe").removeClass("ajax-loading-button").addClass("ajax-error").set("value","error")}}})).send()})}if(document.getElementById("media-like")){document.getElementById("media-like").addEvent("click",function(e){e.preventDefault();document.getElementById("media-like-link").set("html","");document.getElementById("media-like-link").addClass("ajax-loading");var t=hwdms_live_site;var n=document.getElementById("media-like-link").get("href");var r=n.split("?");if(!r[1]){e.stop()}var n=r[1];var i=n.parseQueryString();var s=(new Request({url:t,method:"post",data:"option=com_hwdmediashare&task=get.like&id="+i.id+"&format=raw",onComplete:function(e){var t=false;try{var n=JSON.decode(e);if(typeof n.errors==="undefined"||n.errors>0){var t=true}if(t){document.getElementById("media-like-link").removeClass("ajax-loading").addClass("ajax-error").set("text",n.data.error_msg)}else{document.getElementById("media-like-link").removeClass("ajax-loading").addClass("ajax-success").set("text",n.data.success_msg);if(n.data.likes){document.getElementById("media-likes").set("text",n.data.likes)}}}catch(t){document.getElementById("media-like-link").removeClass("ajax-loading").addClass("ajax-error").set("text","error")}}})).send()})}if(document.getElementById("media-dislike")){document.getElementById("media-dislike").addEvent("click",function(e){e.preventDefault();document.getElementById("media-dislike-link").set("html","");document.getElementById("media-dislike-link").addClass("ajax-loading");var t=hwdms_live_site;var n=document.getElementById("media-like-link").get("href");var r=n.split("?");if(!r[1]){e.stop()}var n=r[1];var i=n.parseQueryString();var s=(new Request({url:t,method:"post",data:"option=com_hwdmediashare&task=get.dislike&id="+i.id+"&format=raw",onComplete:function(e){var t=false;try{var n=JSON.decode(e);if(typeof n.errors==="undefined"||n.errors>0){var t=true}if(t){document.getElementById("media-dislike-link").removeClass("ajax-loading").addClass("ajax-error").set("text",n.data.error_msg)}else{document.getElementById("media-dislike-link").removeClass("ajax-loading").addClass("ajax-success").set("text",n.data.success_msg);if(n.data.dislikes){document.getElementById("media-dislikes").set("text",n.data.dislikes)}}}catch(t){document.getElementById("media-dislike-link").removeClass("ajax-loading").addClass("ajax-error").set("text","error")}}})).send()})}if(document.getElementById("media-fav")){document.getElementById("media-fav").addEvent("click",function(e){e.preventDefault();document.getElementById("media-fav-link").empty().removeProperty("class").addClass("ajax-loading");var t=hwdms_live_site;var n=document.getElementById("media-fav-link").get("href");var r=new URI(n);var i=r.get("query");var s=i.parseQueryString();var o=s.task.split(".");var u=(new Request({url:t,method:"post",data:"option=com_hwdmediashare&task=get."+o[1]+"&id="+s.id+"&format=raw",onComplete:function(e){var t=false;try{var n=JSON.decode(e);if(typeof n.errors==="undefined"||n.errors>0){var t=true}if(t){document.getElementById("media-fav-link").removeClass("ajax-loading").addClass("ajax-error").set("text",n.data.error_msg)}else{if(o[1]=="unfavour"){document.getElementById("media-fav-link").removeClass("ajax-loading").removeClass("media-favadd-link").addClass("ajax-success media-fav-link").set("text",n.data.success_msg).set("href",hwdms_live_site+"index.php?option=com_hwdmediashare&task=mediaitem.favour&id="+s.id+"&return="+s["return"]+"&tmpl="+s.tmpl+"&Itemid="+s.Itemid)}else{document.getElementById("media-fav-link").removeClass("ajax-loading").removeClass("media-fav-link").addClass("ajax-success media-favadd-link").set("text",n.data.success_msg).set("href",hwdms_live_site+"index.php?option=com_hwdmediashare&task=mediaitem.unfavour&id="+s.id+"&return="+s["return"]+"&tmpl="+s.tmpl+"&Itemid="+s.Itemid)}}}catch(t){document.getElementById("media-fav-link").removeClass("ajax-loading").addClass("ajax-error").set("text","error")}}})).send()})}if(document.getElementById("media-favadd")){document.getElementById("media-favadd").addEvent("click",function(e){e.preventDefault();document.getElementById("media-favadd-link").empty().removeProperty("class").addClass("ajax-loading");var t=hwdms_live_site;var n=document.getElementById("media-favadd-link").get("href");var r=new URI(n);var i=r.get("query");var s=i.parseQueryString();var o=s.task.split(".");var u=(new Request({url:t,method:"post",data:"option=com_hwdmediashare&task=get."+o[1]+"&id="+s.id+"&format=raw",onComplete:function(e){var t=false;try{var n=JSON.decode(e);if(typeof n.errors==="undefined"||n.errors>0){var t=true}if(t){document.getElementById("media-favadd-link").removeClass("ajax-loading").addClass("ajax-error").set("text",n.data.error_msg)}else{if(o[1]=="unfavour"){document.getElementById("media-favadd-link").removeClass("ajax-loading").removeClass("media-favadd-link").addClass("ajax-success media-fav-link").set("text",n.data.success_msg).set("href",hwdms_live_site+"index.php?option=com_hwdmediashare&task=mediaitem.favour&id="+s.id+"&return="+s["return"]+"&tmpl="+s.tmpl+"&Itemid="+s.Itemid)}else{document.getElementById("media-favadd-link").removeClass("ajax-loading").removeClass("media-fav-link").addClass("ajax-success media-favadd-link").set("text",n.data.success_msg).set("href",hwdms_live_site+"index.php?option=com_hwdmediashare&task=mediaitem.unfavour&id="+s.id+"&return="+s["return"]+"&tmpl="+s.tmpl+"&Itemid="+s.Itemid)}}}catch(t){document.getElementById("media-favadd-link").removeClass("ajax-loading").addClass("ajax-error").set("text","error")}}})).send()})}})